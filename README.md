# vemu

A toy hypervisor for the RISC-V ISA.  
Currently supports: RV64IMAF full user-space emulation.  
Partially supports the previliged ISA specification.

## Building

vemu uses CMake, I prefer to use Ninja as a generator but a Makefile can be
generated by omitting the `-G Ninja` part from invoking CMake.

```
mkdir build && cd build
cmake ../ -G Ninja
ninja emu
./emu path/to/riscv-bin
```

## Testing

A subset of the RISC-V test suite is used to test vemu, a testing target can be
built and run against the available tests using the following commands, after
generating the ninja build files:

```
ninja test_emu
./test_emu
```

The test suite is organized in a manner that in each test, an `ECALL` 
instruction is invoked whether the test passed or not. A pass/fail value is set
in a register that we could check to see whether all tests have passed or not.
The testing target interposes `ECALL` instructions to do so.
